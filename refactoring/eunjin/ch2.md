# Ch.02 리팩터링 원칙

## 리팩터링이란?

- 리팩터링 방식에 따라 코드를 정리해 코드를 이해하고 수정하기 쉽게 만드는 것이다.
- 리팩터링하는 동안에는 코드가 항상 정상 작동하며, 리팩터링 전과 후의 코드가 똑같이 동작한다(버그가 있었다면 리팩터링 후에도 해당 버그가 그대로 남아있어야 한다).

## 리팩터링하는 이유

- 코드의 목적을 더욱 뚜렷하게해 코드를 이해하기 쉽도록 만들어준다.
- 코드가 계속 추가됨에 따라 코드의 목적이 흐려질 수 있는데, 이를 명확하게 만들어 무너질 수 있는 구조를 바로 잡아준다.
- 코드를 더욱 이해하기 쉽게 만들어 주어 나뿐만 아니라 모두에게 읽기 좋은 코드를 만들어 주고, 이에 따라 버그 또한 쉽게 찾고 수정할 수 있게 된다.
- 이로인해 앞으로의 개발 속도증진에도 큰 영향을 준다.

## 리팩터링 시점

- 해야하는 시점
  - 기능을 새로 추가하기 직전
  - 코드를 분석하는 중 비효율적으로 처리되는 코드나 보이지 않던 설계가 눈에 들어오기 시작할 때
- 하지 말아야하하는 시점
  - 내부 동작을 이해해야할 때
  - 리팩터링하는 것보다 새로 작성하는 게 쉬울 때

## 리팩터링 시 고려할 점

- 코드 소유권을 느슨하게 정해야 한다.
- CI 또는 짧은 주기로 브랜치를 통합해 머지의 복잡도를 낮추어야 한다.
- 안전한 리팩토링이 되도록 자가 테스트 코드를 작성해야 한다.
- 레거시 코드를 리팩터링할 시 서로 관련된 부분끼리 나누어 하나씩 작업해간다.
- 데이터베이스를 리팩터링할 시 프로덕션 환경에서 여러 단계로 나누어 릴리즈한다.

## 느낀점

- "리팩터링 과정에서 발견된 버그는 리팩터링 후에도 그대로 남아 있어야 한다."
- 개발자는 내가 기억해야할 코드를 작성하는 것이 아니라 보기만하면 알 수 있는 코드를, 즉 기억할 필요가 없는 코드를 작성해야 한다.
- 클린 코드를 위해서가 아니다.
- YAGNI 원칙을 지키자. 개발할 때는 미래를 내다보기보단 현재에 충실하자. 어차피 리팩토링 할 것이고, 그 때 가면 쓸모 없어질 수도 있다.
- 성능 촤적화에 집중하기보단 리팩터링을 잘 해서 성능을 개선시키기 쉽게 만들자.
- IDE가 가진 장점을 적극적으로 활용하면 리팩토링에 들이는 시간을 단축시킬 수 있다.
